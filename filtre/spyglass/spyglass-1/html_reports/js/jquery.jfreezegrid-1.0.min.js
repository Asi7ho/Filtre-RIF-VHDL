(function($){$.fn.jFreezeGrid=function(options){var defaults={};var options=$.extend(defaults,options);scrollbarwidth=$.getScrollbarWidth();return this.each(function(){var table_border=$(this).attr("border");var table_cellpadding=$(this).attr("cellpadding");var table_cellspacing=$(this).attr("cellspacing");var largeurs=new Array();$(this).find("tr").first().children().each(function(){largeurs.push($(this).width())});var hauteurs=new Array();$("#"+$(this).attr("id")+" tr").each(function(){hauteurs.push($(this).children().first().height())});var top_cells=new Array();var top_cells_h=new Array();var top_cells_w=new Array();var j=0;$(this).find('tr:lt(2)').each(function(){var i=0;$(this).children().each(function(){top_cells.push($(this));top_cells_h.push(hauteurs[j]);top_cells_w.push(largeurs[i]);i++});j++});var cellules=new Array();var cellules_h=new Array();var i=2;$(this).find('tr:gt(1)').each(function(){var cell=$(this).children(':eq(0)');cellules.push(cell);cellules_h.push(hauteurs[i]);cellules.push(cell.next());cellules_h.push(hauteurs[i]);i++});$.each(top_cells,function(i,n){top_cells[i].html('<div style="width:'+top_cells_w[i]+'px; height:'+top_cells_h[i]+'px;">'+top_cells[i].html()+'</div>')});$.each(cellules,function(i,n){cellules[i].html('<div style="height:'+cellules_h[i]+'px;">'+cellules[i].html()+'</div>')});$(this).wrap('<div id="jfg_wrapper" class="jfg_wrapper"><div id="jfg_body_right"></div></div>');$("#jfg_wrapper").prepend('<div id="jfg_header"><table cellpadding="'+table_cellpadding+'" cellspacing="'+table_cellspacing+'" border='+table_border+' id="jfg_header_left"><tr></tr></table><div id="jfg_header_right"><div id="jfg_header_right_inner"><table class="jfg_header" cellpadding="'+table_cellpadding+'" cellspacing="'+table_cellspacing+'" border="'+table_border+'"></table></div></div></div>');$("#jfg_body_right").wrap('<div id="jfg_body"></div>').before('<div id="jfg_body_left"><table border="'+table_border+'" cellpadding="'+table_cellpadding+'" cellspacing="'+table_cellspacing+'"></table></div>');$(this).find('tr:lt(1)').remove().addClass('header_cell').appendTo($("#jfg_header_right_inner table")).children().first().remove().addClass('header_cell').appendTo($("#jfg_header_left tr"));var cells=new Array();var oldCells=new Array();$(this).find("tr").each(function(){var cell=$(this).children(':eq(0)');cells.push('<tr class="'+$(this).attr("class")+'"><td class="jfg_frozen_row">'+cell.html()+'</td></tr>');oldCells.push(cell)});$.each(oldCells,function(i,n){oldCells[i].remove()});$("#jfg_body_left table").append(cells.join(''));var tleft_pos=$("#jfg_body_left table").position();var left_width=$("#jfg_header_left").width();$("#jfg_header_right").css({left:left_width});$("#jfg_body_right").css({top:tleft_pos.top,left:(left_width+tleft_pos.left)});$("#jfg_body_right table").css({"margin-top":"-"+table_cellspacing+"px","margin-left":"-"+table_cellspacing+"px"});$("#jfg_body_left table").css({"margin-top":"-"+table_cellspacing+"px"});$("#jfg_header_right table").css({"margin-left":"-"+table_cellspacing+"px"});registerEvents();setDimensions();function registerEvents(){$("#jfg_body_right").scroll(function(){$("#jfg_header_right_inner").scrollLeft($(this).scrollLeft());$("#jfg_body_left").scrollTop($(this).scrollTop())});$(window).resize(function(){setDimensions()})}function setDimensions(){var middle_pos=$("#jfg_body_right").position();var width=$(window).width()-middle_pos.left;if(options.height=='available'){var height=$(window).height()-middle_pos.top}else{var height=options.height}$("#jfg_body_left").css({height:(height-scrollbarwidth)+"px"});$("#jfg_header_right, #jfg_header_right_inner").css({width:(width-scrollbarwidth)+"px"});$("#jfg_body_right").css({height:height+"px",width:width+"px"})}})}})(jQuery);